on:
  push:
    branches:
      - main
name: ğŸš€ Deploy website on push
jobs:
  web-deploy:
    name: ğŸ‰ Deploy
    runs-on: ubuntu-latest
    steps:
    - name: ğŸšš Get latest code
      uses: actions/checkout@v2.3.2
    - name: ğŸ“‚ Sync files
      uses: SamKirkland/FTP-Deploy-Action@4.0.0
      with:
        server: ftp.bees4palestine.org
        username: ${{ secrets.SERVER_USERNAME }}
        password: ${{ secrets.SERVER_PASSWORD }}
        server-dir: /application/
#     - name: ğŸ› ï¸ Run Artisan commands
#       run: |
#         cd /application
#         php artisan migrate
#         php artisan cache:clear
#         php artisan optimize
#         php artisan view:cache
    - name: Sending Mail
      uses: fjogeleit/http-request-action@v1.9.2
      with:
        url: "https://b4p-send-email.onrender.com/sendMail"
        method: 'POST'
        data: '{"companyLogoUrl": "","appLink":"","subject": "","to": ["khaled.amoudi00@gmail.com"]}'
#     - name: âœ‰ï¸ Send email notification
#       run: |
#         mail -s "Deployment successful ğŸ¥³" khaled.amoudi00@gmail.com <<EOF
#           The deployment was successful.
#           Thanks,
#           Khaled ğŸ”¥.
#           EOF
        
